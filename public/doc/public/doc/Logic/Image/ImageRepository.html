<!DOCTYPE html><html lang="en"><head><title>public/doc/Logic/Image/ImageRepository</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="public/doc/Logic/Image/ImageRepository"><meta name="groc-project-path" content="public/doc/Logic/Image/ImageRepository.html"><meta name="groc-github-url" content="https://github.com/phillipmadsen/part1"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/phillipmadsen/part1/blob/master/public/doc/Logic/Image/ImageRepository.html">public/doc/Logic/Image/ImageRepository.html</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">html</span> <span class="hljs-attribute">lang</span>=<span class="hljs-value">"en"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Logic/Image/ImageRepository<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"Content-Type"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"text/html; charset=utf-8"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"groc-relative-root"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"../../"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"groc-document-path"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"Logic/Image/ImageRepository"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"groc-project-path"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"app/Logic/Image/ImageRepository.php"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"groc-github-url"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"https://github.com/phillipmadsen/part1"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span> <span class="hljs-attribute">media</span>=<span class="hljs-value">"all"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"../../assets/style.css"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"../../assets/behavior.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"meta"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"file-path"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"https://github.com/phillipmadsen/part1/blob/master/app/Logic/Image/ImageRepository.php"</span>&gt;</span>app/Logic/Image/ImageRepository.php<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"document"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"segment"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"code"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"wrapper"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-preprocessor"</span>&gt;</span>&amp;lt;?php<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>namespace<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Logic<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Image<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;

<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>use<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Illuminate<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Support<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Facades<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Validator<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>use<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Illuminate<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Support<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Facades<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Response<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>use<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Illuminate<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Support<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Facades<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Config<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>use<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Illuminate<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Support<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Facades<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>File<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>use<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Intervention<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Image<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>ImageManager<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>use<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Models<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Image<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>use<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>App<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>\<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>Product<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;

<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-class"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>class<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>ImageRepository<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{
    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>public<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-function"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>function<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>upload<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-params"</span>&gt;</span>( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$form_data<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> )<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$validator<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = Validator::make(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$form_data<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, Image::<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$rules<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, Image::<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$messages<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> (<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$validator<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;fails()) {

            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> Response::json([
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'error'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'message'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$validator<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;messages()-&amp;gt;first(),
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'code'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>400<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
            ], <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>400<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);

        }

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$form_data<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>[<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'file'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>];

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalName<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;getClientOriginalName();
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$extension<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;getClientOriginalExtension();
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalNameWithoutExt<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = substr(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalName<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, strlen(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalName<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) - strlen(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$extension<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) - <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$this<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;sanitize(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalNameWithoutExt<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$allowed_filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$this<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;createUniqueFilename( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$extension<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> );

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$uploadSuccess1<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$this<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;original( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$allowed_filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> );

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$uploadSuccess2<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$this<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;icon( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$allowed_filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> );

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>( !<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$uploadSuccess1<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> || !<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$uploadSuccess2<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ) {

            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> Response::json([
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'error'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'message'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'Server error while uploading'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'code'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>500<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
            ], <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>500<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);

        }

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>new<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> Image;
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;filename      = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$allowed_filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;original_name = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalName<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"segment"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"comments "</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"wrapper"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>$sessionImage-&amp;gt;article_id = 3;<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"code"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"wrapper"</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;save();

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> Response::json([
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'error'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'code'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>  =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>200<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
        ], <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>200<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);

    }

    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>public<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-function"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>function<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>createUniqueFilename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-params"</span>&gt;</span>( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$extension<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> )<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_size_dir<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = Config::get(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'images.full_size'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_image_path<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_size_dir<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'.'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$extension<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ( File::exists( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_image_path<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ) )
        {<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"segment"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"comments "</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"wrapper"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>Generate token for image<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"code"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"wrapper"</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$imageToken<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = substr(sha1(mt_rand()), <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'-'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$imageToken<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'.'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$extension<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
        }

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'.'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$extension<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
    }

    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-comment"</span>&gt;</span>/**
     * Optimize Original Image
     */<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>public<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-function"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>function<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>original<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-params"</span>&gt;</span>( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> )<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$manager<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>new<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ImageManager();
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$image<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$manager<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;make( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> )-&amp;gt;save(Config::get(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'images.full_size'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> );

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$image<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
    }

    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-comment"</span>&gt;</span>/**
     * Create Icon From Original
     */<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>public<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-function"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>function<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>icon<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-params"</span>&gt;</span>( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> )<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$manager<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>new<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ImageManager();
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$image<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$manager<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;make( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$photo<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> )-&amp;gt;resize(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>200<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>null<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-function"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>function<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-params"</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$constraint<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>)<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$constraint<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;aspectRatio();
            })
            -&amp;gt;save( Config::get(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'images.icon_size'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>)  . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$filename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> );

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$image<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
    }

    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-comment"</span>&gt;</span>/**
     * Delete Image From Session folder, based on original filename
     */<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>public<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-function"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>function<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>delete<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-params"</span>&gt;</span>( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalFilename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>)<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_size_dir<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = Config::get(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'images.full_size'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$icon_size_dir<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = Config::get(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'images.icon_size'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = Image::where(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'original_name'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'like'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$originalFilename<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>)-&amp;gt;first();


        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>empty<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>))
        {
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> Response::json([
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'error'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'code'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>  =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>400<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
            ], <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>400<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);

        }

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_path1<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_size_dir<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;filename;
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_path2<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$icon_size_dir<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> . <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;filename;

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ( File::exists( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_path1<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ) )
        {
            File::delete( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_path1<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> );
        }

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ( File::exists( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_path2<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ) )
        {
            File::delete( <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$full_path2<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> );
        }

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>if<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>( !<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>empty<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>))
        {
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$sessionImage<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>-&amp;gt;delete();
        }

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> Response::json([
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'error'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'code'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>  =&amp;gt; <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>200<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
        ], <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-number"</span>&gt;</span>200<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
    }

    <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-function"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>function<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-title"</span>&gt;</span>sanitize<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-params"</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$string<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$force_lowercase<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = true, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$anal<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = false)<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>{
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$strip<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>array<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"~"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"`"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"!"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"@"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"#"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"$"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"%"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"^"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;amp;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"*"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"("<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>")"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"_"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"="<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"+"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"["<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"{"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"]"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"}"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"\\"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"|"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>";"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>":"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"\""<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"'"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;amp;#8216;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;amp;#8217;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;amp;#8220;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;amp;#8221;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;amp;#8211;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;amp;#8212;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>,
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>""<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>""<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>","<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;lt;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"."<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"&amp;gt;"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"/"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"?"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = trim(str_replace(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$strip<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>""<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, strip_tags(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$string<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>)));
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = preg_replace(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'/\s+/'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"-"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>);
        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> = (<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$anal<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) ? preg_replace(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>"/[^a-zA-Z0-9]/"<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>""<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) : <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> ;

        <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-keyword"</span>&gt;</span>return<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> (<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$force_lowercase<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) ?
            (function_exists(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'mb_strtolower'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>)) ?
                mb_strtolower(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-string"</span>&gt;</span>'UTF-8'<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) :
                strtolower(<span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>) :
            <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"hljs-variable"</span>&gt;</span>$clean<span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>;
    }
}<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></div></div></div></div></body></html>