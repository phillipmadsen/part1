<!DOCTYPE html><html lang="en"><head><title>public/vendor/laravel-filemanager/js/cropper.min</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="public/vendor/laravel-filemanager/js/cropper.min"><meta name="groc-project-path" content="public/vendor/laravel-filemanager/js/cropper.min.js"><meta name="groc-github-url" content="https://github.com/phillipmadsen/part1"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/phillipmadsen/part1/blob/master/public/vendor/laravel-filemanager/js/cropper.min.js">public/vendor/laravel-filemanager/js/cropper.min.js</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-comment">/*!
 * Cropper v0.9.1
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2015 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2015-03-21T04:58:27.265Z
 */</span>
!<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> define&amp;&amp;define.amd?define([<span class="hljs-string">"jquery"</span>],a):a(<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> exports?<span class="hljs-built_in">require</span>(<span class="hljs-string">"jquery"</span>):jQuery)}(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-string">"use strict"</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">b</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"number"</span>==<span class="hljs-keyword">typeof</span> a}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"undefined"</span>==<span class="hljs-keyword">typeof</span> a}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">d</span>(<span class="hljs-params">a,c</span>)</span>{<span class="hljs-keyword">var</span> d=[];<span class="hljs-keyword">return</span> b(c)&amp;&amp;d.push(c),d.slice.apply(a,d)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">a,b</span>)</span>{<span class="hljs-keyword">var</span> c=d(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">2</span>);<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> a.apply(b,c.concat(d(<span class="hljs-built_in">arguments</span>)))}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">var</span> b=a.match(<span class="hljs-regexp">/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i</span>);<span class="hljs-keyword">return</span> b&amp;&amp;(b[<span class="hljs-number">1</span>]!==n.protocol||b[<span class="hljs-number">2</span>]!==n.hostname||b[<span class="hljs-number">3</span>]!==n.port)}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">g</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-string">"timestamp="</span>+(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>).getTime();<span class="hljs-keyword">return</span> a+(-<span class="hljs-number">1</span>===a.indexOf(<span class="hljs-string">"?"</span>)?<span class="hljs-string">"?"</span>:<span class="hljs-string">"&amp;"</span>)+b}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">return</span> a?<span class="hljs-string">"rotate("</span>+a+<span class="hljs-string">"deg)"</span>:<span class="hljs-string">"none"</span>}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">i</span>(<span class="hljs-params">a,b</span>)</span>{<span class="hljs-keyword">var</span> c,d,e=P(a.degree)%<span class="hljs-number">180</span>,f=(e&gt;<span class="hljs-number">90</span>?<span class="hljs-number">180</span>-e:e)*<span class="hljs-built_in">Math</span>.PI/<span class="hljs-number">180</span>,g=Q(f),h=R(f),i=a.width,j=a.height,k=a.aspectRatio;<span class="hljs-keyword">return</span> b?(c=i/(h+g/k),d=c/k):(c=i*h+j*g,d=i*g+j*h),{width:c,height:d}}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">j</span>(<span class="hljs-params">b,c</span>)</span>{<span class="hljs-keyword">var</span> d=a(<span class="hljs-string">"&lt;canvas&gt;"</span>)[<span class="hljs-number">0</span>],e=d.getContext(<span class="hljs-string">"2d"</span>),f=c.naturalWidth,g=c.naturalHeight,h=c.rotate,j=i({width:f,height:g,degree:h});<span class="hljs-keyword">return</span> h?(d.width=j.width,d.height=j.height,e.save(),e.translate(j.width/<span class="hljs-number">2</span>,j.height/<span class="hljs-number">2</span>),e.rotate(h*<span class="hljs-built_in">Math</span>.PI/<span class="hljs-number">180</span>),e.drawImage(b,-f/<span class="hljs-number">2</span>,-g/<span class="hljs-number">2</span>,f,g),e.restore()):(d.width=f,d.height=g,e.drawImage(b,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,f,g)),d}<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">k</span>(<span class="hljs-params">b,c</span>)</span>{<span class="hljs-keyword">this</span>.$element=a(b),<span class="hljs-keyword">this</span>.options=a.extend({},k.DEFAULTS,a.isPlainObject(c)&amp;&amp;c),<span class="hljs-keyword">this</span>.ready=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.built=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.rotated=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.cropped=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.disabled=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.load()}<span class="hljs-keyword">var</span> l=a(<span class="hljs-built_in">window</span>),m=a(<span class="hljs-built_in">document</span>),n=<span class="hljs-built_in">window</span>.location,o=<span class="hljs-string">".cropper"</span>,p=<span class="hljs-regexp">/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/</span>,q=<span class="hljs-string">"cropper-modal"</span>,r=<span class="hljs-string">"cropper-hide"</span>,s=<span class="hljs-string">"cropper-hidden"</span>,t=<span class="hljs-string">"cropper-invisible"</span>,u=<span class="hljs-string">"cropper-move"</span>,v=<span class="hljs-string">"cropper-crop"</span>,w=<span class="hljs-string">"cropper-disabled"</span>,x=<span class="hljs-string">"cropper-bg"</span>,y=<span class="hljs-string">"mousedown touchstart"</span>,z=<span class="hljs-string">"mousemove touchmove"</span>,A=<span class="hljs-string">"mouseup mouseleave touchend touchleave touchcancel"</span>,B=<span class="hljs-string">"wheel mousewheel DOMMouseScroll"</span>,C=<span class="hljs-string">"dblclick"</span>,D=<span class="hljs-string">"resize"</span>+o,E=<span class="hljs-string">"build"</span>+o,F=<span class="hljs-string">"built"</span>+o,G=<span class="hljs-string">"dragstart"</span>+o,H=<span class="hljs-string">"dragmove"</span>+o,I=<span class="hljs-string">"dragend"</span>+o,J=<span class="hljs-string">"zoomin"</span>+o,K=<span class="hljs-string">"zoomout"</span>+o,L=a.isFunction(a(<span class="hljs-string">"&lt;canvas&gt;"</span>)[<span class="hljs-number">0</span>].getContext),M=<span class="hljs-built_in">Math</span>.sqrt,N=<span class="hljs-built_in">Math</span>.min,O=<span class="hljs-built_in">Math</span>.max,P=<span class="hljs-built_in">Math</span>.abs,Q=<span class="hljs-built_in">Math</span>.sin,R=<span class="hljs-built_in">Math</span>.cos,S=<span class="hljs-built_in">parseFloat</span>,T={};T.load=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> c,d,e,h=<span class="hljs-keyword">this</span>.options,i=<span class="hljs-keyword">this</span>.$element;b||(i.is(<span class="hljs-string">"img"</span>)?b=i.prop(<span class="hljs-string">"src"</span>):i.is(<span class="hljs-string">"canvas"</span>)&amp;&amp;L&amp;&amp;(b=i[<span class="hljs-number">0</span>].toDataURL())),b&amp;&amp;(d=a.Event(E),i.one(E,h.build).trigger(d),d.isDefaultPrevented()||(h.checkImageOrigin&amp;&amp;f(b)&amp;&amp;(c=<span class="hljs-string">" crossOrigin"</span>,i.prop(<span class="hljs-string">"crossOrigin"</span>)||(b=g(b))),<span class="hljs-keyword">this</span>.$clone=e=a(<span class="hljs-string">"&lt;img&gt;"</span>),e.one(<span class="hljs-string">"load"</span>,a.proxy(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a=e.prop(<span class="hljs-string">"naturalWidth"</span>)||e.width(),c=e.prop(<span class="hljs-string">"naturalHeight"</span>)||e.height();<span class="hljs-keyword">this</span>.image={naturalWidth:a,naturalHeight:c,aspectRatio:a/c,rotate:<span class="hljs-number">0</span>},<span class="hljs-keyword">this</span>.url=b,<span class="hljs-keyword">this</span>.ready=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.build()},<span class="hljs-keyword">this</span>)).attr({src:b,crossOrigin:c}),e.addClass(r).insertAfter(i)))},T.build=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b,c,d=<span class="hljs-keyword">this</span>.$element,e=<span class="hljs-keyword">this</span>.$clone,f=<span class="hljs-keyword">this</span>.options;<span class="hljs-keyword">this</span>.ready&amp;&amp;(<span class="hljs-keyword">this</span>.built&amp;&amp;<span class="hljs-keyword">this</span>.unbuild(),<span class="hljs-keyword">this</span>.$cropper=b=a(k.TEMPLATE),d.addClass(s),e.removeClass(r),<span class="hljs-keyword">this</span>.$container=d.parent().append(b),<span class="hljs-keyword">this</span>.$canvas=b.find(<span class="hljs-string">".cropper-canvas"</span>).append(e),<span class="hljs-keyword">this</span>.$dragBox=b.find(<span class="hljs-string">".cropper-drag-box"</span>),<span class="hljs-keyword">this</span>.$cropBox=c=b.find(<span class="hljs-string">".cropper-crop-box"</span>),<span class="hljs-keyword">this</span>.$viewBox=b.find(<span class="hljs-string">".cropper-view-box"</span>),<span class="hljs-keyword">this</span>.addListeners(),<span class="hljs-keyword">this</span>.initPreview(),f.aspectRatio=S(f.aspectRatio)||<span class="hljs-number">0</span>/<span class="hljs-number">0</span>,f.autoCrop?(<span class="hljs-keyword">this</span>.cropped=!<span class="hljs-number">0</span>,f.modal&amp;&amp;<span class="hljs-keyword">this</span>.$dragBox.addClass(q)):c.addClass(s),f.background&amp;&amp;b.addClass(x),f.highlight||c.find(<span class="hljs-string">".cropper-face"</span>).addClass(t),f.guides||c.find(<span class="hljs-string">".cropper-dashed"</span>).addClass(s),f.movable||c.find(<span class="hljs-string">".cropper-face"</span>).data(<span class="hljs-string">"drag"</span>,<span class="hljs-string">"move"</span>),f.resizable||c.find(<span class="hljs-string">".cropper-line, .cropper-point"</span>).addClass(s),<span class="hljs-keyword">this</span>.setDragMode(f.dragCrop?<span class="hljs-string">"crop"</span>:<span class="hljs-string">"move"</span>),<span class="hljs-keyword">this</span>.built=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.render(),d.one(F,f.built).trigger(F))},T.unbuild=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.built&amp;&amp;(<span class="hljs-keyword">this</span>.built=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.removeListeners(),<span class="hljs-keyword">this</span>.$preview.empty(),<span class="hljs-keyword">this</span>.$preview=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.$viewBox=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.$cropBox=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.$dragBox=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.$canvas=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.$container=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.$cropper.remove(),<span class="hljs-keyword">this</span>.$cropper=<span class="hljs-literal">null</span>)},a.extend(T,{render:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.initContainer(),<span class="hljs-keyword">this</span>.initCanvas(),<span class="hljs-keyword">this</span>.initCropBox()},initContainer:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">this</span>.$element,b=<span class="hljs-keyword">this</span>.$container,c=<span class="hljs-keyword">this</span>.$cropper,d=<span class="hljs-keyword">this</span>.options;c.addClass(s),a.removeClass(s),c.css(<span class="hljs-keyword">this</span>.container={width:O(b.width(),S(d.minContainerWidth)||<span class="hljs-number">200</span>),height:O(b.height(),S(d.minContainerHeight)||<span class="hljs-number">100</span>)}),a.addClass(s),c.removeClass(s)},initCanvas:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.options,c=<span class="hljs-keyword">this</span>.container,d=c.width,e=c.height,f=<span class="hljs-keyword">this</span>.image,g=f.aspectRatio,h={aspectRatio:g,width:d,height:e,left:<span class="hljs-number">0</span>,top:<span class="hljs-number">0</span>,minLeft:-d,minTop:-e,maxLeft:d,maxTop:e,minWidth:<span class="hljs-number">0</span>,minHeight:<span class="hljs-number">0</span>,maxWidth:<span class="hljs-number">1</span>/<span class="hljs-number">0</span>,maxHeight:<span class="hljs-number">1</span>/<span class="hljs-number">0</span>};e*g&gt;d?b.strict?h.width=e*g:h.height=d/g:b.strict?h.height=d/g:h.width=e*g,h.oldLeft=h.left=(d-h.width)/<span class="hljs-number">2</span>,h.oldTop=h.top=(e-h.height)/<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>.canvas=h,<span class="hljs-keyword">this</span>.limitCanvas(),<span class="hljs-keyword">this</span>.initialImage=a.extend({},f),<span class="hljs-keyword">this</span>.initialCanvas=a.extend({},<span class="hljs-keyword">this</span>.canvas),<span class="hljs-keyword">this</span>.renderCanvas()},limitCanvas:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">this</span>.options,b=<span class="hljs-keyword">this</span>.container,c=b.width,d=b.height,e=<span class="hljs-keyword">this</span>.canvas,f=e.aspectRatio,g=c,h=d;d*f&gt;c?a.strict?g=d*f:h=c/f:a.strict?h=c/f:g=d*f,a.strict?(e.minWidth=g,e.minHeight=h,e.maxLeft=<span class="hljs-number">0</span>,e.maxTop=<span class="hljs-number">0</span>,e.minLeft=c-g,e.minTop=d-h):(e.minLeft=-g,e.minTop=-h)},renderCanvas:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> c,d,e,f=<span class="hljs-keyword">this</span>.options,g=<span class="hljs-keyword">this</span>.container,j=<span class="hljs-keyword">this</span>.canvas,k=<span class="hljs-keyword">this</span>.image;<span class="hljs-keyword">this</span>.rotated&amp;&amp;(<span class="hljs-keyword">this</span>.rotated=!<span class="hljs-number">1</span>,e=i({width:k.width,height:k.height,degree:k.rotate}),c=e.width/e.height,c!==j.aspectRatio&amp;&amp;(j.left-=(e.width-j.width)/<span class="hljs-number">2</span>,j.top-=(e.height-j.height)/<span class="hljs-number">2</span>,j.width=e.width,j.height=e.height,j.aspectRatio=c,<span class="hljs-keyword">this</span>.limitCanvas())),(j.width&gt;j.maxWidth||j.width&lt;j.minWidth)&amp;&amp;(j.left=j.oldLeft),(j.height&gt;j.maxHeight||j.height&lt;j.minHeight)&amp;&amp;(j.top=j.oldTop),j.width=N(O(j.width,j.minWidth),j.maxWidth),j.height=N(O(j.height,j.minHeight),j.maxHeight),f.strict?(j.minLeft=g.width-j.width,j.minTop=g.height-j.height):(j.minLeft=-j.width,j.minTop=-j.height),j.oldLeft=j.left=N(O(j.left,j.minLeft),j.maxLeft),j.oldTop=j.top=N(O(j.top,j.minTop),j.maxTop),<span class="hljs-keyword">this</span>.$canvas.css({width:j.width,height:j.height,left:j.left,top:j.top}),k.rotate?(d=i({width:j.width,height:j.height,degree:k.rotate,aspectRatio:k.aspectRatio},!<span class="hljs-number">0</span>),a.extend(k,{width:d.width,height:d.height,left:(j.width-d.width)/<span class="hljs-number">2</span>,top:(j.height-d.height)/<span class="hljs-number">2</span>})):a.extend(k,{width:j.width,height:j.height,left:<span class="hljs-number">0</span>,top:<span class="hljs-number">0</span>}),<span class="hljs-keyword">this</span>.$clone.css({width:k.width,height:k.height,marginLeft:k.left,marginTop:k.top,transform:h(k.rotate)}),b&amp;&amp;(<span class="hljs-keyword">this</span>.preview(),f.crop&amp;&amp;f.crop.call(<span class="hljs-keyword">this</span>.$element,<span class="hljs-keyword">this</span>.getData()))},initCropBox:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.options,c=<span class="hljs-keyword">this</span>.container,d=<span class="hljs-keyword">this</span>.canvas,e=b.strict,f=b.aspectRatio,g=S(b.minCropBoxWidth)||<span class="hljs-number">0</span>,h=S(b.minCropBoxHeight)||<span class="hljs-number">0</span>,i=S(b.autoCropArea)||<span class="hljs-number">.8</span>,j=c.width,k=c.height,l={width:e?j:d.width,height:e?k:d.height,minWidth:g,minHeight:h,maxWidth:j,maxHeight:k};f&amp;&amp;(k*f&gt;j?(l.height=l.width/f,l.maxHeight=j/f):(l.width=l.height*f,l.maxWidth=k*f),e||(l.height*d.aspectRatio&gt;l.width?(l.height=d.height,l.width=l.height*f):(l.width=d.width,l.height=l.width/f)),g?l.minHeight=l.minWidth/f:h&amp;&amp;(l.minWidth=l.minHeight*f)),l.minWidth=N(l.maxWidth,l.minWidth),l.minHeight=N(l.maxHeight,l.minHeight),l.width=O(l.minWidth,l.width*i),l.height=O(l.minHeight,l.height*i),l.oldLeft=l.left=(j-l.width)/<span class="hljs-number">2</span>,l.oldTop=l.top=(k-l.height)/<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>.initialCropBox=a.extend({},l),<span class="hljs-keyword">this</span>.cropBox=l,<span class="hljs-keyword">this</span>.cropped&amp;&amp;<span class="hljs-keyword">this</span>.renderCropBox()},renderCropBox:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">this</span>.options,b=<span class="hljs-keyword">this</span>.container,c=b.width,d=b.height,e=<span class="hljs-keyword">this</span>.$cropBox,f=<span class="hljs-keyword">this</span>.cropBox;(f.width&gt;f.maxWidth||f.width&lt;f.minWidth)&amp;&amp;(f.left=f.oldLeft),(f.height&gt;f.maxHeight||f.height&lt;f.minHeight)&amp;&amp;(f.top=f.oldTop),f.width=N(O(f.width,f.minWidth),f.maxWidth),f.height=N(O(f.height,f.minHeight),f.maxHeight),f.oldLeft=f.left=N(O(f.left,<span class="hljs-number">0</span>),c-f.width),f.oldTop=f.top=N(O(f.top,<span class="hljs-number">0</span>),d-f.height),a.movable&amp;&amp;e.find(<span class="hljs-string">".cropper-face"</span>).data(<span class="hljs-string">"drag"</span>,f.width===c&amp;&amp;f.height===d?<span class="hljs-string">"move"</span>:<span class="hljs-string">"all"</span>),e.css({width:f.width,height:f.height,left:f.left,top:f.top}),<span class="hljs-keyword">this</span>.disabled||(<span class="hljs-keyword">this</span>.preview(),a.crop&amp;&amp;a.crop.call(<span class="hljs-keyword">this</span>.$element,<span class="hljs-keyword">this</span>.getData()))}}),T.initPreview=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.url;<span class="hljs-keyword">this</span>.$preview=a(<span class="hljs-keyword">this</span>.options.preview),<span class="hljs-keyword">this</span>.$viewBox.html(<span class="hljs-string">'&lt;img src="'</span>+b+<span class="hljs-string">'"&gt;'</span>),<span class="hljs-keyword">this</span>.$preview.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> c=a(<span class="hljs-keyword">this</span>);c.data({width:c.width(),height:c.height()}).html(<span class="hljs-string">'&lt;img src="'</span>+b+<span class="hljs-string">'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important"&gt;'</span>)})},T.preview=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.image,c=<span class="hljs-keyword">this</span>.canvas,d=<span class="hljs-keyword">this</span>.cropBox,e=b.width,f=b.height,g=d.left-c.left-b.left,i=d.top-c.top-b.top,j=b.rotate;<span class="hljs-keyword">this</span>.cropped&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;(<span class="hljs-keyword">this</span>.$viewBox.find(<span class="hljs-string">"img"</span>).css({width:e,height:f,marginLeft:-g,marginTop:-i,transform:h(j)}),<span class="hljs-keyword">this</span>.$preview.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b=a(<span class="hljs-keyword">this</span>),c=b.data(),k=c.width/d.width,l=c.width,m=d.height*k;m&gt;c.height&amp;&amp;(k=c.height/d.height,l=d.width*k,m=c.height),b.width(l).height(m).find(<span class="hljs-string">"img"</span>).css({width:e*k,height:f*k,marginLeft:-g*k,marginTop:-i*k,transform:h(j)})}))},T.addListeners=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.options;<span class="hljs-keyword">this</span>.$element.on(G,b.dragstart).on(H,b.dragmove).on(I,b.dragend).on(J,b.zoomin).on(K,b.zoomout),<span class="hljs-keyword">this</span>.$cropper.on(y,a.proxy(<span class="hljs-keyword">this</span>.dragstart,<span class="hljs-keyword">this</span>)).on(C,a.proxy(<span class="hljs-keyword">this</span>.dblclick,<span class="hljs-keyword">this</span>)),b.zoomable&amp;&amp;b.mouseWheelZoom&amp;&amp;<span class="hljs-keyword">this</span>.$cropper.on(B,a.proxy(<span class="hljs-keyword">this</span>.wheel,<span class="hljs-keyword">this</span>)),m.on(z,<span class="hljs-keyword">this</span>._dragmove=e(<span class="hljs-keyword">this</span>.dragmove,<span class="hljs-keyword">this</span>)).on(A,<span class="hljs-keyword">this</span>._dragend=e(<span class="hljs-keyword">this</span>.dragend,<span class="hljs-keyword">this</span>)),b.responsive&amp;&amp;l.on(D,<span class="hljs-keyword">this</span>._resize=e(<span class="hljs-keyword">this</span>.resize,<span class="hljs-keyword">this</span>))},T.removeListeners=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">this</span>.options;<span class="hljs-keyword">this</span>.$element.off(G,a.dragstart).off(H,a.dragmove).off(I,a.dragend).off(J,a.zoomin).off(K,a.zoomout),<span class="hljs-keyword">this</span>.$cropper.off(y,<span class="hljs-keyword">this</span>.dragstart).off(C,<span class="hljs-keyword">this</span>.dblclick),a.zoomable&amp;&amp;a.mouseWheelZoom&amp;&amp;<span class="hljs-keyword">this</span>.$cropper.off(B,<span class="hljs-keyword">this</span>.wheel),m.off(z,<span class="hljs-keyword">this</span>._dragmove).off(A,<span class="hljs-keyword">this</span>._dragend),a.responsive&amp;&amp;l.off(D,<span class="hljs-keyword">this</span>._resize)},a.extend(T,{resize:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b,c,d,e=<span class="hljs-keyword">this</span>.$container,f=<span class="hljs-keyword">this</span>.container;<span class="hljs-keyword">this</span>.disabled||(d=e.width()/f.width,(<span class="hljs-number">1</span>!==d||e.height()!==f.height)&amp;&amp;(b=<span class="hljs-keyword">this</span>.getCanvasData(),c=<span class="hljs-keyword">this</span>.getCropBoxData(),<span class="hljs-keyword">this</span>.render(),<span class="hljs-keyword">this</span>.setCanvasData(a.each(b,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,c</span>)</span>{b[a]=c*d})),<span class="hljs-keyword">this</span>.setCropBoxData(a.each(c,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>)</span>{c[a]=b*d}))))},dblclick:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.disabled||<span class="hljs-keyword">this</span>.setDragMode(<span class="hljs-keyword">this</span>.$dragBox.hasClass(v)?<span class="hljs-string">"move"</span>:<span class="hljs-string">"crop"</span>)},wheel:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">var</span> b=a.originalEvent,c=<span class="hljs-number">1</span>;<span class="hljs-keyword">this</span>.disabled||(a.preventDefault(),b.deltaY?c=b.deltaY&gt;<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:-<span class="hljs-number">1</span>:b.wheelDelta?c=-b.wheelDelta/<span class="hljs-number">120</span>:b.detail&amp;&amp;(c=b.detail&gt;<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:-<span class="hljs-number">1</span>),<span class="hljs-keyword">this</span>.zoom(<span class="hljs-number">.1</span>*c))},dragstart:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> c,d,e,f=<span class="hljs-keyword">this</span>.options,g=b.originalEvent,h=g&amp;&amp;g.touches,i=b;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.disabled){<span class="hljs-keyword">if</span>(h){<span class="hljs-keyword">if</span>(e=h.length,e&gt;<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(!f.zoomable||!f.touchDragZoom||<span class="hljs-number">2</span>!==e)<span class="hljs-keyword">return</span>;i=h[<span class="hljs-number">1</span>],<span class="hljs-keyword">this</span>.startX2=i.pageX,<span class="hljs-keyword">this</span>.startY2=i.pageY,c=<span class="hljs-string">"zoom"</span>}i=h[<span class="hljs-number">0</span>]}<span class="hljs-keyword">if</span>(c=c||a(i.target).data(<span class="hljs-string">"drag"</span>),p.test(c)){<span class="hljs-keyword">if</span>(b.preventDefault(),d=a.Event(G,{originalEvent:g,dragType:c}),<span class="hljs-keyword">this</span>.$element.trigger(d),d.isDefaultPrevented())<span class="hljs-keyword">return</span>;<span class="hljs-keyword">this</span>.dragType=c,<span class="hljs-keyword">this</span>.cropping=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.startX=i.pageX,<span class="hljs-keyword">this</span>.startY=i.pageY,<span class="hljs-string">"crop"</span>===c&amp;&amp;(<span class="hljs-keyword">this</span>.cropping=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.$dragBox.addClass(q))}}},dragmove:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> c,d,e=<span class="hljs-keyword">this</span>.options,f=b.originalEvent,g=f&amp;&amp;f.touches,h=b,i=<span class="hljs-keyword">this</span>.dragType;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.disabled){<span class="hljs-keyword">if</span>(g){<span class="hljs-keyword">if</span>(d=g.length,d&gt;<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(!e.zoomable||!e.touchDragZoom||<span class="hljs-number">2</span>!==d)<span class="hljs-keyword">return</span>;h=g[<span class="hljs-number">1</span>],<span class="hljs-keyword">this</span>.endX2=h.pageX,<span class="hljs-keyword">this</span>.endY2=h.pageY}h=g[<span class="hljs-number">0</span>]}<span class="hljs-keyword">if</span>(i){<span class="hljs-keyword">if</span>(b.preventDefault(),c=a.Event(H,{originalEvent:f,dragType:i}),<span class="hljs-keyword">this</span>.$element.trigger(c),c.isDefaultPrevented())<span class="hljs-keyword">return</span>;<span class="hljs-keyword">this</span>.endX=h.pageX,<span class="hljs-keyword">this</span>.endY=h.pageY,<span class="hljs-keyword">this</span>.change()}}},dragend:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> c,d=<span class="hljs-keyword">this</span>.dragType;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.disabled&amp;&amp;d){<span class="hljs-keyword">if</span>(b.preventDefault(),c=a.Event(I,{originalEvent:b.originalEvent,dragType:d}),<span class="hljs-keyword">this</span>.$element.trigger(c),c.isDefaultPrevented())<span class="hljs-keyword">return</span>;<span class="hljs-keyword">this</span>.cropping&amp;&amp;(<span class="hljs-keyword">this</span>.cropping=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.$dragBox.toggleClass(q,<span class="hljs-keyword">this</span>.cropped&amp;&amp;<span class="hljs-keyword">this</span>.options.modal)),<span class="hljs-keyword">this</span>.dragType=<span class="hljs-string">""</span>}}}),a.extend(T,{reset:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.disabled||(<span class="hljs-keyword">this</span>.image=a.extend({},<span class="hljs-keyword">this</span>.initialImage),<span class="hljs-keyword">this</span>.canvas=a.extend({},<span class="hljs-keyword">this</span>.initialCanvas),<span class="hljs-keyword">this</span>.renderCanvas(),<span class="hljs-keyword">this</span>.cropped&amp;&amp;(<span class="hljs-keyword">this</span>.cropBox=a.extend({},<span class="hljs-keyword">this</span>.initialCropBox),<span class="hljs-keyword">this</span>.renderCropBox()))},clear:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.cropped&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;(a.extend(<span class="hljs-keyword">this</span>.cropBox,{left:<span class="hljs-number">0</span>,top:<span class="hljs-number">0</span>,width:<span class="hljs-number">0</span>,height:<span class="hljs-number">0</span>}),<span class="hljs-keyword">this</span>.renderCropBox(),<span class="hljs-keyword">this</span>.cropped=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.$dragBox.removeClass(q),<span class="hljs-keyword">this</span>.$cropBox.addClass(s))},destroy:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">this</span>.$element;<span class="hljs-keyword">this</span>.ready||<span class="hljs-keyword">this</span>.$clone.off(<span class="hljs-string">"load"</span>).remove(),<span class="hljs-keyword">this</span>.unbuild(),a.removeClass(s).removeData(<span class="hljs-string">"cropper"</span>)},replace:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">this</span>.ready&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;a&amp;&amp;<span class="hljs-keyword">this</span>.load(a)},enable:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.built&amp;&amp;(<span class="hljs-keyword">this</span>.disabled=!<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.$cropper.removeClass(w))},disable:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.built&amp;&amp;(<span class="hljs-keyword">this</span>.disabled=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.$cropper.addClass(w))},move:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,c</span>)</span>{<span class="hljs-keyword">var</span> d=<span class="hljs-keyword">this</span>.canvas;<span class="hljs-keyword">this</span>.built&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;b(a)&amp;&amp;b(c)&amp;&amp;(d.left+=a,d.top+=c,<span class="hljs-keyword">this</span>.renderCanvas(!<span class="hljs-number">0</span>))},zoom:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> c,d,e,f=<span class="hljs-keyword">this</span>.canvas;<span class="hljs-keyword">if</span>(b=S(b),b&amp;&amp;<span class="hljs-keyword">this</span>.built&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;<span class="hljs-keyword">this</span>.options.zoomable){<span class="hljs-keyword">if</span>(c=a.Event(b&gt;<span class="hljs-number">0</span>?J:K),<span class="hljs-keyword">this</span>.$element.trigger(c),c.isDefaultPrevented())<span class="hljs-keyword">return</span>;b=-<span class="hljs-number">1</span>&gt;=b?<span class="hljs-number">1</span>/(<span class="hljs-number">1</span>-b):<span class="hljs-number">1</span>&gt;=b?<span class="hljs-number">1</span>+b:b,d=f.width*b,e=f.height*b,f.left-=(d-f.width)/<span class="hljs-number">2</span>,f.top-=(e-f.height)/<span class="hljs-number">2</span>,f.width=d,f.height=e,<span class="hljs-keyword">this</span>.renderCanvas(!<span class="hljs-number">0</span>),<span class="hljs-keyword">this</span>.setDragMode(<span class="hljs-string">"move"</span>)}},rotate:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.image;a=S(a),a&amp;&amp;<span class="hljs-keyword">this</span>.built&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;<span class="hljs-keyword">this</span>.options.rotatable&amp;&amp;(b.rotate=(b.rotate+a)%<span class="hljs-number">360</span>,<span class="hljs-keyword">this</span>.rotated=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.renderCanvas(!<span class="hljs-number">0</span>))},getData:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> b,c,d=<span class="hljs-keyword">this</span>.cropBox,e=<span class="hljs-keyword">this</span>.canvas,f=<span class="hljs-keyword">this</span>.image,g=f.rotate;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.built&amp;&amp;<span class="hljs-keyword">this</span>.cropped?(c={x:d.left-e.left,y:d.top-e.top,width:d.width,height:d.height},b=f.width/f.naturalWidth,a.each(c,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,d</span>)</span>{d/=b,c[a]=d})):c={x:<span class="hljs-number">0</span>,y:<span class="hljs-number">0</span>,width:<span class="hljs-number">0</span>,height:<span class="hljs-number">0</span>},c.rotate=g,c},getContainerData:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.built?<span class="hljs-keyword">this</span>.container:{}},getImageData:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.ready?<span class="hljs-keyword">this</span>.image:{}},getCanvasData:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a,b=<span class="hljs-keyword">this</span>.canvas;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.built&amp;&amp;(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCanvasData:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>)</span>{<span class="hljs-keyword">var</span> d=<span class="hljs-keyword">this</span>.canvas,e=d.aspectRatio;<span class="hljs-keyword">this</span>.built&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;a.isPlainObject(c)&amp;&amp;(b(c.left)&amp;&amp;(d.left=c.left),b(c.top)&amp;&amp;(d.top=c.top),b(c.width)?(d.width=c.width,d.height=c.width/e):b(c.height)&amp;&amp;(d.height=c.height,d.width=c.height*e),<span class="hljs-keyword">this</span>.renderCanvas(!<span class="hljs-number">0</span>))},getCropBoxData:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a,b=<span class="hljs-keyword">this</span>.cropBox;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.built&amp;&amp;<span class="hljs-keyword">this</span>.cropped&amp;&amp;(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCropBoxData:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>)</span>{<span class="hljs-keyword">var</span> d=<span class="hljs-keyword">this</span>.cropBox,e=<span class="hljs-keyword">this</span>.options.aspectRatio;<span class="hljs-keyword">this</span>.built&amp;&amp;<span class="hljs-keyword">this</span>.cropped&amp;&amp;!<span class="hljs-keyword">this</span>.disabled&amp;&amp;a.isPlainObject(c)&amp;&amp;(b(c.left)&amp;&amp;(d.left=c.left),b(c.top)&amp;&amp;(d.top=c.top),e?b(c.width)?(d.width=c.width,d.height=d.width/e):b(c.height)&amp;&amp;(d.height=c.height,d.width=d.height*e):(b(c.width)&amp;&amp;(d.width=c.width),b(c.height)&amp;&amp;(d.height=c.height)),<span class="hljs-keyword">this</span>.renderCropBox())},getCroppedCanvas:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> c,d,e,f,g,h,i,k,l,m,n;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.built&amp;&amp;<span class="hljs-keyword">this</span>.cropped&amp;&amp;L)<span class="hljs-keyword">return</span> a.isPlainObject(b)||(b={}),n=<span class="hljs-keyword">this</span>.getData(),c=n.width,d=n.height,k=c/d,a.isPlainObject(b)&amp;&amp;(g=b.width,h=b.height,g?(h=g/k,i=g/c):h&amp;&amp;(g=h*k,i=h/d)),e=g||c,f=h||d,l=a(<span class="hljs-string">"&lt;canvas&gt;"</span>)[<span class="hljs-number">0</span>],l.width=e,l.height=f,m=l.getContext(<span class="hljs-string">"2d"</span>),b.fillColor&amp;&amp;(m.fillStyle=b.fillColor,m.fillRect(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,e,f)),m.drawImage.apply(m,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a,b,e,f,g,h,k=j(<span class="hljs-keyword">this</span>.$clone[<span class="hljs-number">0</span>],<span class="hljs-keyword">this</span>.image),l=k.width,m=k.height,o=[k],p=n.x,q=n.y;<span class="hljs-keyword">return</span>-c&gt;=p||p&gt;l?p=a=e=g=<span class="hljs-number">0</span>:<span class="hljs-number">0</span>&gt;=p?(e=-p,p=<span class="hljs-number">0</span>,a=g=N(l,c+p)):l&gt;=p&amp;&amp;(e=<span class="hljs-number">0</span>,a=g=N(c,l-p)),<span class="hljs-number">0</span>&gt;=a||-d&gt;=q||q&gt;m?q=b=f=h=<span class="hljs-number">0</span>:<span class="hljs-number">0</span>&gt;=q?(f=-q,q=<span class="hljs-number">0</span>,b=h=N(m,d+q)):m&gt;=q&amp;&amp;(f=<span class="hljs-number">0</span>,b=h=N(d,m-q)),o.push(p,q,a,b),i&amp;&amp;(e*=i,f*=i,g*=i,h*=i),g&gt;<span class="hljs-number">0</span>&amp;&amp;h&gt;<span class="hljs-number">0</span>&amp;&amp;o.push(e,f,g,h),o}.call(<span class="hljs-keyword">this</span>)),l},setAspectRatio:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.options;<span class="hljs-keyword">this</span>.disabled||c(a)||(b.aspectRatio=S(a)||<span class="hljs-number">0</span>/<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.built&amp;&amp;<span class="hljs-keyword">this</span>.initCropBox())},setDragMode:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">var</span> b=<span class="hljs-keyword">this</span>.$dragBox,c=!<span class="hljs-number">1</span>,d=!<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.ready&amp;&amp;!<span class="hljs-keyword">this</span>.disabled){<span class="hljs-keyword">switch</span>(a){<span class="hljs-keyword">case</span><span class="hljs-string">"crop"</span>:<span class="hljs-keyword">this</span>.options.dragCrop?(c=!<span class="hljs-number">0</span>,b.data(<span class="hljs-string">"drag"</span>,a)):d=!<span class="hljs-number">0</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"move"</span>:d=!<span class="hljs-number">0</span>,b.data(<span class="hljs-string">"drag"</span>,a);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">default</span>:b.removeData(<span class="hljs-string">"drag"</span>)}b.toggleClass(v,c).toggleClass(u,d)}}}),T.change=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> a,b=<span class="hljs-keyword">this</span>.dragType,c=<span class="hljs-keyword">this</span>.canvas,d=<span class="hljs-keyword">this</span>.container,e=d.width,f=d.height,g=<span class="hljs-keyword">this</span>.cropBox,h=g.width,i=g.height,j=g.left,k=g.top,l=j+h,m=k+i,n=!<span class="hljs-number">0</span>,o=<span class="hljs-keyword">this</span>.options.aspectRatio,p={x:<span class="hljs-keyword">this</span>.endX-<span class="hljs-keyword">this</span>.startX,y:<span class="hljs-keyword">this</span>.endY-<span class="hljs-keyword">this</span>.startY};<span class="hljs-keyword">switch</span>(o&amp;&amp;(p.X=p.y*o,p.Y=p.x/o),b){<span class="hljs-keyword">case</span><span class="hljs-string">"all"</span>:j+=p.x,k+=p.y;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"e"</span>:<span class="hljs-keyword">if</span>(p.x&gt;=<span class="hljs-number">0</span>&amp;&amp;(l&gt;=e||o&amp;&amp;(<span class="hljs-number">0</span>&gt;=k||m&gt;=f))){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}h+=p.x,o&amp;&amp;(i=h/o,k-=p.Y/<span class="hljs-number">2</span>),<span class="hljs-number">0</span>&gt;h&amp;&amp;(b=<span class="hljs-string">"w"</span>,h=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"n"</span>:<span class="hljs-keyword">if</span>(p.y&lt;=<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-number">0</span>&gt;=k||o&amp;&amp;(<span class="hljs-number">0</span>&gt;=j||l&gt;=e))){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}i-=p.y,k+=p.y,o&amp;&amp;(h=i*o,j+=p.X/<span class="hljs-number">2</span>),<span class="hljs-number">0</span>&gt;i&amp;&amp;(b=<span class="hljs-string">"s"</span>,i=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"w"</span>:<span class="hljs-keyword">if</span>(p.x&lt;=<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-number">0</span>&gt;=j||o&amp;&amp;(<span class="hljs-number">0</span>&gt;=k||m&gt;=f))){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}h-=p.x,j+=p.x,o&amp;&amp;(i=h/o,k+=p.Y/<span class="hljs-number">2</span>),<span class="hljs-number">0</span>&gt;h&amp;&amp;(b=<span class="hljs-string">"e"</span>,h=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"s"</span>:<span class="hljs-keyword">if</span>(p.y&gt;=<span class="hljs-number">0</span>&amp;&amp;(m&gt;=f||o&amp;&amp;(<span class="hljs-number">0</span>&gt;=j||l&gt;=e))){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}i+=p.y,o&amp;&amp;(h=i*o,j-=p.X/<span class="hljs-number">2</span>),<span class="hljs-number">0</span>&gt;i&amp;&amp;(b=<span class="hljs-string">"n"</span>,i=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"ne"</span>:<span class="hljs-keyword">if</span>(o){<span class="hljs-keyword">if</span>(p.y&lt;=<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-number">0</span>&gt;=k||l&gt;=e)){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}i-=p.y,k+=p.y,h=i*o}<span class="hljs-keyword">else</span> p.x&gt;=<span class="hljs-number">0</span>?e&gt;l?h+=p.x:p.y&lt;=<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-number">0</span>&gt;=k&amp;&amp;(n=!<span class="hljs-number">1</span>):h+=p.x,p.y&lt;=<span class="hljs-number">0</span>?k&gt;<span class="hljs-number">0</span>&amp;&amp;(i-=p.y,k+=p.y):(i-=p.y,k+=p.y);<span class="hljs-number">0</span>&gt;h&amp;&amp;<span class="hljs-number">0</span>&gt;i?(b=<span class="hljs-string">"sw"</span>,i=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;h?(b=<span class="hljs-string">"nw"</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;i&amp;&amp;(b=<span class="hljs-string">"se"</span>,i=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"nw"</span>:<span class="hljs-keyword">if</span>(o){<span class="hljs-keyword">if</span>(p.y&lt;=<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-number">0</span>&gt;=k||<span class="hljs-number">0</span>&gt;=j)){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}i-=p.y,k+=p.y,h=i*o,j+=p.X}<span class="hljs-keyword">else</span> p.x&lt;=<span class="hljs-number">0</span>?j&gt;<span class="hljs-number">0</span>?(h-=p.x,j+=p.x):p.y&lt;=<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-number">0</span>&gt;=k&amp;&amp;(n=!<span class="hljs-number">1</span>):(h-=p.x,j+=p.x),p.y&lt;=<span class="hljs-number">0</span>?k&gt;<span class="hljs-number">0</span>&amp;&amp;(i-=p.y,k+=p.y):(i-=p.y,k+=p.y);<span class="hljs-number">0</span>&gt;h&amp;&amp;<span class="hljs-number">0</span>&gt;i?(b=<span class="hljs-string">"se"</span>,i=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;h?(b=<span class="hljs-string">"ne"</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;i&amp;&amp;(b=<span class="hljs-string">"sw"</span>,i=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"sw"</span>:<span class="hljs-keyword">if</span>(o){<span class="hljs-keyword">if</span>(p.x&lt;=<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-number">0</span>&gt;=j||m&gt;=f)){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}h-=p.x,j+=p.x,i=h/o}<span class="hljs-keyword">else</span> p.x&lt;=<span class="hljs-number">0</span>?j&gt;<span class="hljs-number">0</span>?(h-=p.x,j+=p.x):p.y&gt;=<span class="hljs-number">0</span>&amp;&amp;m&gt;=f&amp;&amp;(n=!<span class="hljs-number">1</span>):(h-=p.x,j+=p.x),p.y&gt;=<span class="hljs-number">0</span>?f&gt;m&amp;&amp;(i+=p.y):i+=p.y;<span class="hljs-number">0</span>&gt;h&amp;&amp;<span class="hljs-number">0</span>&gt;i?(b=<span class="hljs-string">"ne"</span>,i=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;h?(b=<span class="hljs-string">"se"</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;i&amp;&amp;(b=<span class="hljs-string">"nw"</span>,i=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"se"</span>:<span class="hljs-keyword">if</span>(o){<span class="hljs-keyword">if</span>(p.x&gt;=<span class="hljs-number">0</span>&amp;&amp;(l&gt;=e||m&gt;=f)){n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>}h+=p.x,i=h/o}<span class="hljs-keyword">else</span> p.x&gt;=<span class="hljs-number">0</span>?e&gt;l?h+=p.x:p.y&gt;=<span class="hljs-number">0</span>&amp;&amp;m&gt;=f&amp;&amp;(n=!<span class="hljs-number">1</span>):h+=p.x,p.y&gt;=<span class="hljs-number">0</span>?f&gt;m&amp;&amp;(i+=p.y):i+=p.y;<span class="hljs-number">0</span>&gt;h&amp;&amp;<span class="hljs-number">0</span>&gt;i?(b=<span class="hljs-string">"nw"</span>,i=<span class="hljs-number">0</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;h?(b=<span class="hljs-string">"sw"</span>,h=<span class="hljs-number">0</span>):<span class="hljs-number">0</span>&gt;i&amp;&amp;(b=<span class="hljs-string">"ne"</span>,i=<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"move"</span>:c.left+=p.x,c.top+=p.y,<span class="hljs-keyword">this</span>.renderCanvas(!<span class="hljs-number">0</span>),n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"zoom"</span>:<span class="hljs-keyword">this</span>.zoom(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b,c,d</span>)</span>{<span class="hljs-keyword">var</span> e=M(a*a+b*b),f=M(c*c+d*d);<span class="hljs-keyword">return</span>(f-e)/e}(P(<span class="hljs-keyword">this</span>.startX-<span class="hljs-keyword">this</span>.startX2),P(<span class="hljs-keyword">this</span>.startY-<span class="hljs-keyword">this</span>.startY2),P(<span class="hljs-keyword">this</span>.endX-<span class="hljs-keyword">this</span>.endX2),P(<span class="hljs-keyword">this</span>.endY-<span class="hljs-keyword">this</span>.endY2))),<span class="hljs-keyword">this</span>.startX2=<span class="hljs-keyword">this</span>.endX2,<span class="hljs-keyword">this</span>.startY2=<span class="hljs-keyword">this</span>.endY2,n=!<span class="hljs-number">1</span>;<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"crop"</span>:p.x&amp;&amp;p.y&amp;&amp;(a=<span class="hljs-keyword">this</span>.$cropper.offset(),j=<span class="hljs-keyword">this</span>.startX-a.left,k=<span class="hljs-keyword">this</span>.startY-a.top,h=g.minWidth,i=g.minHeight,p.x&gt;<span class="hljs-number">0</span>?p.y&gt;<span class="hljs-number">0</span>?b=<span class="hljs-string">"se"</span>:(b=<span class="hljs-string">"ne"</span>,k-=i):p.y&gt;<span class="hljs-number">0</span>?(b=<span class="hljs-string">"sw"</span>,j-=h):(b=<span class="hljs-string">"nw"</span>,j-=h,k-=i),<span class="hljs-keyword">this</span>.cropped||(<span class="hljs-keyword">this</span>.cropped=!<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.$cropBox.removeClass(s)))}n&amp;&amp;(g.width=h,g.height=i,g.left=j,g.top=k,<span class="hljs-keyword">this</span>.dragType=b,<span class="hljs-keyword">this</span>.renderCropBox()),<span class="hljs-keyword">this</span>.startX=<span class="hljs-keyword">this</span>.endX,<span class="hljs-keyword">this</span>.startY=<span class="hljs-keyword">this</span>.endY},a.extend(k.prototype,T),k.DEFAULTS={aspectRatio:<span class="hljs-number">0</span>/<span class="hljs-number">0</span>,autoCropArea:<span class="hljs-number">.8</span>,crop:<span class="hljs-literal">null</span>,preview:<span class="hljs-string">""</span>,strict:!<span class="hljs-number">0</span>,responsive:!<span class="hljs-number">0</span>,checkImageOrigin:!<span class="hljs-number">0</span>,modal:!<span class="hljs-number">0</span>,guides:!<span class="hljs-number">0</span>,highlight:!<span class="hljs-number">0</span>,background:!<span class="hljs-number">0</span>,autoCrop:!<span class="hljs-number">0</span>,dragCrop:!<span class="hljs-number">0</span>,movable:!<span class="hljs-number">0</span>,resizable:!<span class="hljs-number">0</span>,rotatable:!<span class="hljs-number">0</span>,zoomable:!<span class="hljs-number">0</span>,touchDragZoom:!<span class="hljs-number">0</span>,mouseWheelZoom:!<span class="hljs-number">0</span>,minCropBoxWidth:<span class="hljs-number">0</span>,minCropBoxHeight:<span class="hljs-number">0</span>,minContainerWidth:<span class="hljs-number">200</span>,minContainerHeight:<span class="hljs-number">100</span>,build:<span class="hljs-literal">null</span>,built:<span class="hljs-literal">null</span>,dragstart:<span class="hljs-literal">null</span>,dragmove:<span class="hljs-literal">null</span>,dragend:<span class="hljs-literal">null</span>,zoomin:<span class="hljs-literal">null</span>,zoomout:<span class="hljs-literal">null</span>},k.setDefaults=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{a.extend(k.DEFAULTS,b)},k.TEMPLATE=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>)</span>{<span class="hljs-keyword">return</span> b=b.split(<span class="hljs-string">","</span>),a.replace(<span class="hljs-regexp">/\d+/g</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)</span>{<span class="hljs-keyword">return</span> b[a]})}(<span class="hljs-string">'&lt;0 6="5-container"&gt;&lt;0 6="5-canvas"&gt;&lt;/0&gt;&lt;0 6="5-2-9" 3-2="move"&gt;&lt;/0&gt;&lt;0 6="5-crop-9"&gt;&lt;1 6="5-view-9"&gt;&lt;/1&gt;&lt;1 6="5-8 8-h"&gt;&lt;/1&gt;&lt;1 6="5-8 8-v"&gt;&lt;/1&gt;&lt;1 6="5-face" 3-2="all"&gt;&lt;/1&gt;&lt;1 6="5-7 7-e" 3-2="e"&gt;&lt;/1&gt;&lt;1 6="5-7 7-n" 3-2="n"&gt;&lt;/1&gt;&lt;1 6="5-7 7-w" 3-2="w"&gt;&lt;/1&gt;&lt;1 6="5-7 7-s" 3-2="s"&gt;&lt;/1&gt;&lt;1 6="5-4 4-e" 3-2="e"&gt;&lt;/1&gt;&lt;1 6="5-4 4-n" 3-2="n"&gt;&lt;/1&gt;&lt;1 6="5-4 4-w" 3-2="w"&gt;&lt;/1&gt;&lt;1 6="5-4 4-s" 3-2="s"&gt;&lt;/1&gt;&lt;1 6="5-4 4-ne" 3-2="ne"&gt;&lt;/1&gt;&lt;1 6="5-4 4-nw" 3-2="nw"&gt;&lt;/1&gt;&lt;1 6="5-4 4-sw" 3-2="sw"&gt;&lt;/1&gt;&lt;1 6="5-4 4-se" 3-2="se"&gt;&lt;/1&gt;&lt;/0&gt;&lt;/0&gt;'</span>,<span class="hljs-string">"div,span,drag,data,point,cropper,class,line,dashed,box"</span>),k.other=a.fn.cropper,a.fn.cropper=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>)</span>{<span class="hljs-keyword">var</span> e,f=d(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> c,d=a(<span class="hljs-keyword">this</span>),g=d.data(<span class="hljs-string">"cropper"</span>);g||d.data(<span class="hljs-string">"cropper"</span>,g=<span class="hljs-keyword">new</span> k(<span class="hljs-keyword">this</span>,b)),<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> b&amp;&amp;a.isFunction(c=g[b])&amp;&amp;(e=c.apply(g,f))}),c(e)?<span class="hljs-keyword">this</span>:e},a.fn.cropper.Constructor=k,a.fn.cropper.setDefaults=k.setDefaults,a.fn.cropper.noConflict=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> a.fn.cropper=k.other,<span class="hljs-keyword">this</span>}});</div></div></div></div></body></html>